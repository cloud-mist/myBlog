<!DOCTYPE html>
<html><head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Acg | 0x04 - 忆の風</title><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="二分总结" />
	<meta property="og:image" content=""/>
	<meta property="og:title" content="Acg | 0x04" />
<meta property="og:description" content="二分总结" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://shawncheung.com/programming/acg-0x04/" /><meta property="article:section" content="programming" />
<meta property="article:published_time" content="2021-07-22T14:54:11+08:00" />
<meta property="article:modified_time" content="2021-07-22T14:54:11+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Acg | 0x04"/>
<meta name="twitter:description" content="二分总结"/>
<script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
	<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@1,500&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Fira+Sans&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet">

	
	<link rel="stylesheet" type="text/css" media="screen" href="https://shawncheung.com/css/main.40ca3a860425083862b7ebd55447caec5c4384573f0cb098b8d06a91e8dace2e.css" />
		<link id="darkModeStyle" rel="stylesheet" type="text/css" href="https://shawncheung.com/css/dark.726cd11ca6eb7c4f7d48eb420354f814e5c1b94281aaf8fd0511c1319f7f78a4.css"  disabled />
	
	
	
</head>
<body>
        <div class="content"><header>
    <div class="main">
		<a href="https://shawncheung.com/">忆の風</a>
	</div>
	<nav>
		
		<a href="/programming/">一书房</a>
		
		<a href="/life/">五味馆</a>
		
		<a href="/tags">Tags</a>
		
		<a href="/about/">关于</a>
		
		| <a id="dark-mode-toggle" onclick="toggleTheme()" href=""></a>
		<script src="https://shawncheung.com/js/themetoggle.js"></script>
		
	</nav>
    <link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css"
  integrity="sha384-Xi8rHCmBmhbuyyhbI88391ZKP2dmfnOl4rT9ZfRI7mLTdk1wblIUnrIq35nqwEvC"
  crossorigin="anonymous"
/>


<script
  defer
  src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js"
  integrity="sha384-X/XCfMm41VSsqRNQgDerQczD69XqmjOOOwYQvr/uuC+j4OPoNhVgjdGFwhvN02Ja"
  crossorigin="anonymous"
></script>


<script
  defer
  src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js"
  integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR"
  crossorigin="anonymous"
  onload="renderMathInElement(document.body);"
></script>

</header>

<main>
	<article>
		<div class="title">
			<h1 class="title">Acg | 0x04</h1>
			<div class="meta">Posted on Jul 22, 2021</div>
		</div>
		

		<section class="body">
			<h2 id="一整数二分">一、整数二分</h2>
<h3 id="explain">Explain</h3>
<ol>
<li>将模板分为二种情况,循环以<code>l=r</code>结束</li>
<li>看第一段，若\(a[mid]\geq{x}\),因为是单增序列，推出 mid 后面的数会更大，所以缩小区间为左半段,又 mid 也可能是答案，因此<code>r=mid</code></li>
<li>为什么采用右移运算，而不是除法。右移是向下取整，整除是向零取整，在值域包含负数的时候后者没法正常工作。</li>
</ol>
<h3 id="code">Code</h3>
<ol>
<li>
<p>在单增序列 a 中查找\(\geq{x}\)中最小的那个</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">while</span> l<span style="color:#f92672">&lt;</span>r:
</span></span><span style="display:flex;"><span>	mid<span style="color:#f92672">=</span>l<span style="color:#f92672">+</span>r<span style="color:#f92672">&gt;&gt;</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> a[mid]<span style="color:#f92672">&gt;=</span>x:
</span></span><span style="display:flex;"><span>		r<span style="color:#f92672">=</span>mid
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>		l<span style="color:#f92672">=</span>mid<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>在 a 中找\(\leq{x}\)中最大的那个</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">while</span> l<span style="color:#f92672">&lt;</span>r:
</span></span><span style="display:flex;"><span>	mid<span style="color:#f92672">=</span>l<span style="color:#f92672">+</span>r<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span><span style="color:#f92672">&gt;&gt;</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> a[mid]<span style="color:#f92672">&lt;=</span>x:
</span></span><span style="display:flex;"><span>		l<span style="color:#f92672">=</span>mid
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>		r<span style="color:#f92672">=</span>mid<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<h3 id="problems">Problems</h3>
<p><a href="https://www.acwing.com/problem/content/791/">E1 数的范围</a></p>
<ol>
<li>topic</li>
</ol>
<ul>
<li>给定一个按照升序排列的长度为 n 的整数数组,以及 q 个查询。对于每个查询，返回一个元素 k 的起始位置和终止位置（位置从 0 开始计数）。如果数组中不存在该元素，则返回 -1 -1.</li>
</ul>
<ol start="2">
<li>analyse</li>
</ol>
<ul>
<li>先用模板找起始位置，即最小的那个。</li>
<li>如果<code>s[l]!=x</code>,说明没找到，输出<code>-1 -1</code>即可，</li>
<li>否则，输出起始，再用模板找终止位置即可。</li>
</ul>
<ol start="3">
<li>
<p>code</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>n,q<span style="color:#f92672">=</span>map(int, input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span>s<span style="color:#f92672">=</span>list(map(int, input()<span style="color:#f92672">.</span>split()))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">while</span> q:
</span></span><span style="display:flex;"><span>	q<span style="color:#f92672">-=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>	x<span style="color:#f92672">=</span>int(input())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	l,r<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>,n<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">while</span> l<span style="color:#f92672">&lt;</span>r:
</span></span><span style="display:flex;"><span>		mid <span style="color:#f92672">=</span>l<span style="color:#f92672">+</span>r<span style="color:#f92672">&gt;&gt;</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">if</span> s[mid]<span style="color:#f92672">&gt;=</span>x: r<span style="color:#f92672">=</span>mid
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">else</span>: l<span style="color:#f92672">=</span>mid<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> s[l]<span style="color:#f92672">!=</span>x:
</span></span><span style="display:flex;"><span>		print(<span style="color:#e6db74">&#39;-1 -1&#39;</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>		print(l,end<span style="color:#f92672">=</span><span style="color:#e6db74">&#39; &#39;</span>)
</span></span><span style="display:flex;"><span>		l,r<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>,n<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">while</span> l<span style="color:#f92672">&lt;</span>r:
</span></span><span style="display:flex;"><span>			mid<span style="color:#f92672">=</span>l<span style="color:#f92672">+</span>r<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span><span style="color:#f92672">&gt;&gt;</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">if</span> s[mid]<span style="color:#f92672">&lt;=</span>x: l<span style="color:#f92672">=</span>mid
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">else</span>: r<span style="color:#f92672">=</span>mid<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>		print(l)
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<h2 id="二实数二分">二、实数二分</h2>
<h3 id="explain-1">Explain</h3>
<ul>
<li>确定精度<code>eps</code>.如果需要保留 k 位小数，\(eps=1e-(k+2)\)</li>
</ul>
<h3 id="code-1">Code</h3>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">while</span> l<span style="color:#f92672">+</span><span style="color:#ae81ff">1e-5</span><span style="color:#f92672">&lt;</span>r:
</span></span><span style="display:flex;"><span>	mid<span style="color:#f92672">=</span>(l<span style="color:#f92672">+</span>r)<span style="color:#f92672">/</span><span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> calc(mid):
</span></span><span style="display:flex;"><span>		r<span style="color:#f92672">=</span>mid
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>		l<span style="color:#f92672">=</span>mid
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="problems-1">Problems</h3>
<p><a href="https://www.acwing.com/problem/content/792/">E1 数的三次方根</a></p>
<ol>
<li>题目<br>
给定一个浮点数 n，求它的三次方根。</li>
<li>code
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>x<span style="color:#f92672">=</span>float(input())
</span></span><span style="display:flex;"><span>N<span style="color:#f92672">=</span><span style="color:#ae81ff">1e4</span>
</span></span><span style="display:flex;"><span>l,r<span style="color:#f92672">=-</span>N,N
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">while</span> l<span style="color:#f92672">+</span><span style="color:#ae81ff">1e-8</span><span style="color:#f92672">&lt;</span>r:
</span></span><span style="display:flex;"><span>	mid <span style="color:#f92672">=</span> (l<span style="color:#f92672">+</span>r)<span style="color:#f92672">/</span><span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> mid<span style="color:#f92672">**</span><span style="color:#ae81ff">3</span><span style="color:#f92672">&gt;=</span>x:
</span></span><span style="display:flex;"><span>		r<span style="color:#f92672">=</span>mid
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>		l<span style="color:#f92672">=</span>mid
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">%.6f</span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">%</span> l)
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<h2 id="三二分答案转换成判定">三、二分答案转换成判定</h2>
<h3 id="explain-2">Explain</h3>
<ul>
<li>题目中出现类似于“<strong>最大值最小</strong>”的含义，这是答案具有单调性，可用二分转化成判定的特征之一</li>
</ul>
<h3 id="problems-2">Problems</h3>
<p><a href="https://www.acwing.com/problem/content/104/">E1 最佳牛围栏</a></p>
<ol>
<li>思考</li>
</ol>
<ul>
<li>转换题目：给定正整数数列 A,求一个平均数<strong>最大</strong>且长度不小于 L 的连续子段.</li>
<li>如果 mid 是答案，判定“是否存在一个长度不小于 L 的子段，平均数不小于二分的值”</li>
<li>如果每个数都减去 mid,那么就转化为，“是否存在一个长度不小于 L 的子段，子段和&gt;=0”</li>
<li>如果存在，则更新<code>l=mid</code>,因为答案肯定在右边</li>
</ul>
<ol start="2">
<li>
<p>code</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>n,f<span style="color:#f92672">=</span>map(int, input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span>cow<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>sum<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span>]\<span style="color:#f92672">*</span>(n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>cow<span style="color:#f92672">.</span>append(int(input()))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">check</span>(mid):
</span></span><span style="display:flex;"><span>    	<span style="color:#75715e"># 要逐次-mid</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>,n<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    		sum[i] <span style="color:#f92672">=</span> sum[i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]<span style="color:#f92672">+</span>cow[i]<span style="color:#f92672">-</span>mid
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    	minv<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span> <span style="color:#75715e"># 因为sum[0]是0</span>
</span></span><span style="display:flex;"><span>    	i,j<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>,f
</span></span><span style="display:flex;"><span>    	<span style="color:#66d9ef">while</span> j<span style="color:#f92672">&lt;=</span>n:
</span></span><span style="display:flex;"><span>    		minv <span style="color:#f92672">=</span> min(minv, sum[i]) <span style="color:#75715e">#记录之前的最小值</span>
</span></span><span style="display:flex;"><span>    		<span style="color:#66d9ef">if</span> sum[j]<span style="color:#f92672">-</span>minv<span style="color:#f92672">&gt;=</span><span style="color:#ae81ff">0</span>: <span style="color:#75715e"># 说明有合法方案</span>
</span></span><span style="display:flex;"><span>    			<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span>    		j<span style="color:#f92672">+=</span><span style="color:#ae81ff">1</span>;i<span style="color:#f92672">+=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">False</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    l,r<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">2000</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> l<span style="color:#f92672">+</span><span style="color:#ae81ff">1e-5</span><span style="color:#f92672">&lt;</span>r:
</span></span><span style="display:flex;"><span>    	mid<span style="color:#f92672">=</span>(l<span style="color:#f92672">+</span>r)<span style="color:#f92672">/</span><span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>    	<span style="color:#66d9ef">if</span> check(mid): <span style="color:#75715e"># 说明存在平均值不小于二分的值，所以要取右半边</span>
</span></span><span style="display:flex;"><span>    		l<span style="color:#f92672">=</span>mid
</span></span><span style="display:flex;"><span>    	<span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>    		r<span style="color:#f92672">=</span>mid
</span></span><span style="display:flex;"><span>    print(int(r<span style="color:#f92672">*</span><span style="color:#ae81ff">1000</span>))
</span></span><span style="display:flex;"><span>    <span style="color:#960050;background-color:#1e0010">```</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[E2 防线](https:<span style="color:#f92672">//</span>www<span style="color:#f92672">.</span>acwing<span style="color:#f92672">.</span>com<span style="color:#f92672">/</span>problem<span style="color:#f92672">/</span>content<span style="color:#f92672">/</span>description<span style="color:#f92672">/</span><span style="color:#ae81ff">122</span><span style="color:#f92672">/</span>)
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>思考</p>
</li>
<li>
<p>code</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>T <span style="color:#f92672">=</span> int(input())
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">while</span> T:
</span></span><span style="display:flex;"><span>	T<span style="color:#f92672">-=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	s<span style="color:#f92672">=</span>[]
</span></span><span style="display:flex;"><span>	n<span style="color:#f92672">=</span>int(input())
</span></span><span style="display:flex;"><span>	l,r<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(n):
</span></span><span style="display:flex;"><span>		ss,e,d<span style="color:#f92672">=</span>map(int, input()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span>		s<span style="color:#f92672">.</span>append([ss,e,d])
</span></span><span style="display:flex;"><span>		r<span style="color:#f92672">=</span>max(r, e)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">getsum</span>(x):
</span></span><span style="display:flex;"><span>		res<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> s:
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">if</span> i[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">&lt;=</span>x:
</span></span><span style="display:flex;"><span>				res <span style="color:#f92672">+=</span> (min(i[<span style="color:#ae81ff">1</span>], x) <span style="color:#f92672">-</span> i[<span style="color:#ae81ff">0</span>]) <span style="color:#f92672">//</span> i[<span style="color:#ae81ff">2</span>] <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> res
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">while</span> l<span style="color:#f92672">&lt;</span>r:
</span></span><span style="display:flex;"><span>		mid <span style="color:#f92672">=</span> l<span style="color:#f92672">+</span>r<span style="color:#f92672">&gt;&gt;</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">if</span> getsum(mid)<span style="color:#f92672">%</span><span style="color:#ae81ff">2</span>: <span style="color:#75715e">#如果是奇数,答案肯定在左半边</span>
</span></span><span style="display:flex;"><span>			r<span style="color:#f92672">=</span>mid
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>			l<span style="color:#f92672">=</span>mid<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	sum <span style="color:#f92672">=</span> getsum(r)<span style="color:#f92672">-</span>getsum(r<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> sum<span style="color:#f92672">%</span><span style="color:#ae81ff">2</span>:
</span></span><span style="display:flex;"><span>		print(r,sum)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>		print(<span style="color:#e6db74">&#34;There&#39;s no weakness.&#34;</span>)
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>

		</section>

		<div class="post-tags">
			
			
			<nav class="nav tags">
				<ul class="tags">
					
					<li><a href="/tags/%E7%AE%97%E6%B3%95">算法</a></li>
					
					<li><a href="/tags/%E4%BA%8C%E5%88%86">二分</a></li>
					
				</ul>
			</nav>
			
			
		</div>
	</article>
</main>
<footer>
  <div style="display:flex"><a class="soc" href="https://github.com/cloud-mist" title="GitHub"><i data-feather="github"></i></a><a class="soc" href="" title="Twitter"><i data-feather="twitter"></i></a><a class="soc" href="" title="GitLab"><i data-feather="gitlab"></i></a></div>
  <div class="footer-info">
    2022  © Shawn |  <a
      href="https://github.com/athul/archie">Archie Theme</a> | Built with <a href="https://gohugo.io">Hugo</a>
  </div>
</footer>


<script>
  feather.replace()
</script></div>
    </body>
</html>
